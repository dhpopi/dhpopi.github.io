{{ define "main" }}

<header class="page-header">
  <h1>{{ .Title }}</h1>
  {{ with .Params.description }}<p>{{ . }}</p>{{ end }}
</header>

<section class="p-cards">
  {{ $paginator := .Paginate .Pages }}

  {{ range $paginator.Pages }}
    <article class="p-card">
      <h2 class="p-title">
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </h2>

      <div class="p-meta">
        <time datetime="{{ .Date }}">{{ .Date.Format "2006-01-02" }}</time>
        {{ with .Params.tags }}
          <span class="p-tags">
            ·
            {{ range $i, $t := . }}
              {{ if $i }}, {{ end }}
              <a href="{{ printf "/tags/%s/" ($t | urlize) | relURL }}">#{{ $t }}</a>
            {{ end }}
          </span>
        {{ end }}
      </div>

      {{ with .Params.abstract }}
        <p class="p-desc">{{ . }}</p>
      {{ else }}
        <p class="p-desc">{{ .Summary | plainify | truncate 140 }}</p>
      {{ end }}
    </article>
  {{ end }}

  <nav class="p-pagination">
    {{ if $paginator.HasPrev }}<a href="{{ $paginator.Prev.URL }}">← 上一页</a>{{ end }}
    {{ if $paginator.HasNext }}<a href="{{ $paginator.Next.URL }}">下一页 →</a>{{ end }}
  </nav>
</section>

{{ end }}
